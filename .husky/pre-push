#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Get the current branch name
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Ensure GitHub CLI is installed
if ! command -v gh &> /dev/null; then
    echo "GitHub CLI (gh) is not installed. Please install it."
    exit 1
fi

# Automatically create a PR using GitHub CLI
PR_URL=$(gh pr create --base main --head "$CURRENT_BRANCH" --title "PR for $CURRENT_BRANCH" --body "Auto-created PR" 2>/dev/null)

if [ $? -eq 0 ]; then
    echo "Pull Request created: $PR_URL"
else
    echo "Failed to create a Pull Request. Ensure the GitHub CLI is authenticated and the repository has a valid 'main' branch."
    exit 1
fi
